#project:
#  template: 'python_jobs'
#
#values:
#  name: 'zuul'
#  disabled: 'false'
#  github_org: 'openstack-ci'
#  review_site: 'review.openstack.org'
#  node: 'precise'
#
#---

- job:
    name: gate-zuul-pyflakes
    project-type: freestyle
    concurrent: true
    timeout: 20
    timeout_fail: true

    triggers:
      - zuul

    builders:
      - gerrit_git_prep
      - pyflakes

    assignednode:
      node: 'precise'

- job:
    name: zuul-docs
    project-type: freestyle
    #review_site: 'review.openstack.org'
    #github_org: 'openstack-ci'
    #project: 'zuul'
    #authenticatedBuild: 'false'
    concurrent: true
    timeout: 20
    timeout_fail: true

    triggers:
      - zuul_post

    logrotate:
      daysToKeep: 28
      numToKeep: -1
      artifactDaysToKeep: -1
      artifactNumToKeep: -1

    builders:
      - gerrit_git_prep
      - docs

    post_build_actions:
      - scp:
          site: '173.203.107.207'
          source: 'doc/build/html/**/*'
          target_path: 'ci/zuul'
          keep_heirarchy: 'true'

    assignednode:
      node: 'precise'
