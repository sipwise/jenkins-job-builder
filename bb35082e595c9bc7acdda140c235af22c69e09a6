{
  "comments": [
    {
      "key": {
        "uuid": "AAAAM3//V4s\u003d",
        "filename": "jenkins_jobs/modules/base.py",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 5909
      },
      "writtenOn": "2013-01-28T08:18:25Z",
      "side": 1,
      "message": "I think the interface here should be different, something like:\n\n    def add_nonblank_xml_subelement(parent, tag, value):\n    \"\"\"\n    Adds an XML SubElement with the name tag to parent if value is a non-empty string\n    \"\"\"\n\nThe function would then look like:\n\n    if value is not None and value !\u003d \u0027\u0027:\n        XML.SubElement(parent, tag).text \u003d value\n\nPassing in a yaml tag name and the entire yaml structure somewhere else looks sub-optimal, in particular because you can\u0027t then address subelements well.\n\nAssuming you do this, the calls to add_n_x_s should be adjusted, of course.",
      "revId": "bb35082e595c9bc7acdda140c235af22c69e09a6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAM3//UKk\u003d",
        "filename": "jenkins_jobs/modules/base.py",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 215
      },
      "writtenOn": "2013-01-29T09:43:21Z",
      "side": 1,
      "message": "The change you are suggesting substantially reduces the benefit of the function.\n\nThe yaml_tag value differs from the xml_tag value, therefore the interface you suggest prohibits the two different checks that are performed within this function.  This would force the first check back into the code wherever this function is used, which seems less dry to me.",
      "parentUuid": "AAAAM3//V4s\u003d",
      "revId": "bb35082e595c9bc7acdda140c235af22c69e09a6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAM3//UJo\u003d",
        "filename": "jenkins_jobs/modules/base.py",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 5909
      },
      "writtenOn": "2013-01-29T10:17:57Z",
      "side": 1,
      "message": "It would change\n\n    info \u003d XML.SubElement(eib, \u0027info\u0027)\n    jenkins_jobs.modules.base.add_nonblank_xml_subelement(\n        \u0027properties-content\u0027, \u0027propertiesContent\u0027, info, data)\n\ninto:\n\n    info \u003d XML.SubElement(eib, \u0027info\u0027)\n    add_nonblank_xml_subelement(\u0027propertiesContent\u0027, info, data.get(\u0027properties-content\u0027))\n\nI don\u0027t see why you think this is less DRY? I think the interface makes more sense since there\u0027s a much closer connection between the yaml tag and data, as it\u0027s being extracted on the calling side.",
      "parentUuid": "AAAAM3//UKk\u003d",
      "revId": "bb35082e595c9bc7acdda140c235af22c69e09a6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAM3//UJQ\u003d",
        "filename": "jenkins_jobs/modules/base.py",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 215
      },
      "writtenOn": "2013-01-29T10:24:45Z",
      "side": 1,
      "message": "To keep the same functionality it would actually change it to:\n\n    info \u003d XML.SubElement(eib, \u0027info\u0027)\n    if \u0027properties-content\u0027 in data:\n        add_nonblank_xml_subelement(\u0027propertiesContent\u0027, info, data.get(\u0027properties-content\u0027))\n\nThe current function checks for the existence of the yaml tag in the data before retrieving it, and then only adds the XML output if the retrieved value is not a blank string.\n\nBy changing the function as you suggest that first check can no longer be performed.",
      "parentUuid": "AAAAM3//UJo\u003d",
      "revId": "bb35082e595c9bc7acdda140c235af22c69e09a6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAM3//UCk\u003d",
        "filename": "jenkins_jobs/modules/base.py",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 5909
      },
      "writtenOn": "2013-01-29T13:13:14Z",
      "side": 1,
      "message": "data.get(key) returns the value corresponding to key is such exists, else it returns None, so for a non-existing key it would be equivalent to calling:\n\n    add_nonblank_xml_subelement(\u0027propertiesContent\u0027, info, None)\n\nThis means my suggested if check fails and the function returns without adding a subelement.",
      "parentUuid": "AAAAM3//UJQ\u003d",
      "revId": "bb35082e595c9bc7acdda140c235af22c69e09a6",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}