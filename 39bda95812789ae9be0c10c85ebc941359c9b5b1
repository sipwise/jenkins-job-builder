{
  "comments": [
    {
      "key": {
        "uuid": "facab960_0b0085a9",
        "filename": "jenkins_jobs/cmd.py",
        "patchSetId": 11
      },
      "lineNbr": 43,
      "author": {
        "id": 1054
      },
      "writtenOn": "2014-04-28T22:02:30Z",
      "side": 1,
      "message": "I meant any reason not to do the following:\n\n def main(argv\u003dsys.argv[1:])",
      "revId": "39bda95812789ae9be0c10c85ebc941359c9b5b1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_ebc7e162",
        "filename": "jenkins_jobs/cmd.py",
        "patchSetId": 11
      },
      "lineNbr": 43,
      "author": {
        "id": 11020
      },
      "writtenOn": "2014-04-28T22:06:51Z",
      "side": 1,
      "message": "This argv would be a mutable object (a list). It\u0027s a potential source of bugs in Python.\n\nTry this:\n\ndef foo(some_list\u003d[]):\n    some_list.append(\u0027foo\u0027)\n    return some_list\n\nprint foo()  # [\u0027foo\u0027]\nprint foo()  # [\u0027foo\u0027, \u0027foo\u0027] (!!!)\n\nSame applies for dictionaries or any other mutable object.",
      "parentUuid": "facab960_0b0085a9",
      "revId": "39bda95812789ae9be0c10c85ebc941359c9b5b1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_0b9c0569",
        "filename": "jenkins_jobs/cmd.py",
        "patchSetId": 11
      },
      "lineNbr": 43,
      "author": {
        "id": 11011
      },
      "writtenOn": "2014-04-28T22:10:16Z",
      "side": 1,
      "message": "Ah okay. Thanks for clarifying what you were asking. Indeed, I didn\u0027t understand your question before.\n\nThe reason I default to None and then assign is that I don\u0027t like to have arguments default to a mutable type, because it can cause very subtle ad confusing bugs.\n\nhttp://docs.python-guide.org/en/latest/writing/gotchas/#mutable-default-arguments\n\nThis probably isn\u0027t an issue in normal execution of JJB since main would probably only be called once. But I can imagine that if we started writing tests (which in fact is the motivation for this change), then we might call main several times and we could run into this weird behavior.\n\nI\u0027m very paranoid of this problem, because I\u0027ve hit it a few times and it always seems to take a long time to debug. So I pretty much never put mutable data structures as default argument values.",
      "parentUuid": "facab960_0b0085a9",
      "revId": "39bda95812789ae9be0c10c85ebc941359c9b5b1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ad9bd40_3f8d8732",
        "filename": "jenkins_jobs/cmd.py",
        "patchSetId": 11
      },
      "lineNbr": 43,
      "author": {
        "id": 1054
      },
      "writtenOn": "2014-04-29T22:08:11Z",
      "side": 1,
      "message": "Ah, thanks. I must have fortunate enough to avoid the problem.\n\nIf it\u0027s that much of a gotcha to work around it in this way, is it worth adding a comment for the two lines below so that no-one makes the mistake of trying to be more terse?",
      "parentUuid": "facab960_0b9c0569",
      "revId": "39bda95812789ae9be0c10c85ebc941359c9b5b1",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}