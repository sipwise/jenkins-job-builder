{
  "comments": [
    {
      "key": {
        "uuid": "3fa7e38b_0add11dd",
        "filename": "doc/source/conf.py",
        "patchSetId": 9
      },
      "lineNbr": 279,
      "author": {
        "id": 1054
      },
      "writtenOn": "2020-01-06T15:51:41Z",
      "side": 1,
      "message": "would it be worth experimenting with https://www.sphinx-doc.org/en/1.2/config.html#confval-linkcheck_workers here to bump the number of threads checking links to 10 or 20?\n\nA local test with 30 takes only 3m55.314s versus 7m38.708 with the default of 5. I suspect it does the link checking per file so it has to wait at the end of each file before it can start checking the next batch, limiting the speed up.\n\nAny further improvements would likely require switching the links to use the newer plugins website references instead as I think that responds quicker than the confluence based links (rudimentary test locally puts a curl to https://plugins.jenkins.io/view-job-filters at 0m1.037s vs 0m5.441s for https://wiki.jenkins.io/display/JENKINS/View+Job+Filters), but at least this would reduce the initial impact to CI times.",
      "revId": "7b00932d2c4ccd25a269ca6238f90427f3c6ad37",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_10fbfebe",
        "filename": "doc/source/conf.py",
        "patchSetId": 9
      },
      "lineNbr": 279,
      "author": {
        "id": 13807
      },
      "writtenOn": "2020-01-06T17:14:14Z",
      "side": 1,
      "message": "Yeah I think it would be worth doing.Â Depends how many CPU cores Zuul jobs have access to though since I think this won\u0027t help much if we\u0027re running on a smaller system.\n\nIn any case let\u0027s explore this as a separate patch so that we can move forward with getting the link checking going.",
      "parentUuid": "3fa7e38b_0add11dd",
      "revId": "7b00932d2c4ccd25a269ca6238f90427f3c6ad37",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_4063dddd",
        "filename": "doc/source/conf.py",
        "patchSetId": 9
      },
      "lineNbr": 279,
      "author": {
        "id": 1054
      },
      "writtenOn": "2020-01-07T11:05:36Z",
      "side": 1,
      "message": "As the link checks are I/O limited, this should work well on a single core as well as the main slowness is waiting for responses.",
      "parentUuid": "3fa7e38b_10fbfebe",
      "revId": "7b00932d2c4ccd25a269ca6238f90427f3c6ad37",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_4a38e9d2",
        "filename": "doc/source/conf.py",
        "patchSetId": 9
      },
      "lineNbr": 285,
      "author": {
        "id": 1054
      },
      "writtenOn": "2020-01-06T15:51:41Z",
      "side": 1,
      "message": "I\u0027m guessing this is for an individual link rather than a total because the full run required ~7-8 minutes for me? \n\nWould it be worth tuning it down, maybe to 30 seconds, if it takes longer than that for a connection attempt to return, I think maybe better to have it marked as bad and return rather than churning away waiting for 5 minutes.",
      "range": {
        "startLine": 285,
        "startChar": 20,
        "endLine": 285,
        "endChar": 23
      },
      "revId": "7b00932d2c4ccd25a269ca6238f90427f3c6ad37",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_d05c86f1",
        "filename": "doc/source/conf.py",
        "patchSetId": 9
      },
      "lineNbr": 285,
      "author": {
        "id": 13807
      },
      "writtenOn": "2020-01-06T17:14:14Z",
      "side": 1,
      "message": "I had to explicitly bump this up due to wiki.jenkins.io taking extra long to respond. Without this links to wiki.jenkins.io will randomly fail.",
      "parentUuid": "3fa7e38b_4a38e9d2",
      "range": {
        "startLine": 285,
        "startChar": 20,
        "endLine": 285,
        "endChar": 23
      },
      "revId": "7b00932d2c4ccd25a269ca6238f90427f3c6ad37",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_e089a96f",
        "filename": "doc/source/conf.py",
        "patchSetId": 9
      },
      "lineNbr": 285,
      "author": {
        "id": 1054
      },
      "writtenOn": "2020-01-07T11:05:36Z",
      "side": 1,
      "message": "oh wow that\u0027s interesting, I mean I wouldn\u0027t have expected a single socket to require 300 seconds to complete a connection. \n\nMust go try and understand how this timeout applies.",
      "parentUuid": "3fa7e38b_d05c86f1",
      "range": {
        "startLine": 285,
        "startChar": 20,
        "endLine": 285,
        "endChar": 23
      },
      "revId": "7b00932d2c4ccd25a269ca6238f90427f3c6ad37",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_ff3dc38c",
        "filename": "doc/source/conf.py",
        "patchSetId": 9
      },
      "lineNbr": 285,
      "author": {
        "id": 13807
      },
      "writtenOn": "2020-01-07T15:30:29Z",
      "side": 1,
      "message": "To be clear I didn\u0027t do a scientific approach here so the right value could be a little lower. But I know at least on my end it takes about ~2 minutes for wiki.jenkins.io to fully respond, I figured giving it a little extra time might be good to account for variations.\n\nplugins.jenkins.io is quite a bit faster though so maybe switching our links to that might speed things up. On the otherhand I\u0027ve found that the plugins pages to be much less informative than the wiki pages :(",
      "parentUuid": "3fa7e38b_e089a96f",
      "range": {
        "startLine": 285,
        "startChar": 20,
        "endLine": 285,
        "endChar": 23
      },
      "revId": "7b00932d2c4ccd25a269ca6238f90427f3c6ad37",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}